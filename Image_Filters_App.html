<!DOCTYPE HTML>
<html>
  <head>
  <link href='https://fonts.googleapis.com/css?family=Walter+Turncoat|Source+Sans+Pro' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
  <style type="text/css">
#sitebody{
 width:1360px;
 font-size:16px;
}
#header{
 background-color:#ffffff;
 height:350px;
 padding: 40px;
 text-align:left;
 line-height:30px;
}
#sidebar_left{
 background-color:#ffffff;
 width:280px;
 height:1000px;
 padding: 0px;
 text-align:center;
 line-height:40px;
 float:left;
 font-size:13px;
}
#sidebar_right{
 background-color:#ffffff;
 width:80px;
 height:1000px;
 text-align:center;
 line-height:40px;
 float:right;
}
#content{
 margin-left:280px;
 margin-right:80px;
 height:1000px;
 background-color:#ffffff;
 text-align:center;
 line-height:40px;
}
#footer{
 clear:both;
 background-color:#ffffff;
 height:30px;
 text-align:center;
 line-height:30px;
}
</style>
  <style>
  body{
    font-family: 'Source Sans Pro', sans-serif;
    font-size: large;
  }
  #zoom{
    border: 1px solid #000000;
  }
  .button{
    font-family: 'Source Sans Pro', sans-serif;
    font-size: 16px;
    background-color: #4CAF50; /* Green */
    border-radius: 3px;
    border: 2px solid #4CAF50;
    color: white;
    margin-top: 5px;
    margin-right: 3px;
    padding: 10px 25px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    -webkit-transition-duration: 0.4s; /* Safari */
    transition-duration: 0.4s;
    cursor: pointer;
  }
  .button:hover {
    background-color: white;
    color: #4CAF50;
    border: 2px solid #4CAF50;
  }
  .button2{
    font-family: 'Source Sans Pro', sans-serif;
    font-size: 16px;
    background-color: #60E612; /* Green */
    border-radius: 3px;
    border: 2px solid #60E612;
    color: white;
    margin-top: 7px;
    margin-right: 5px;
    padding: 10px 25px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    -webkit-transition-duration: 0.4s; /* Safari */
    transition-duration: 0.4s;
    cursor: pointer;
  }
  .button2:hover {
    background-color: white;
    color: #FF0000;
    border: 2px solid #60E612;
  }
  .button3{
    font-family: 'Source Sans Pro', sans-serif;
    font-size: 16px;
    background-color: #60E612; /* Green */
    border-radius: 3px;
    border: 2px solid #60E612;
    color: white;
    margin-top: 7px;
    margin-right: 5px;
    padding: 10px 25px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    -webkit-transition-duration: 0.4s; /* Safari */
    transition-duration: 0.4s;
    cursor: pointer;
  }
  .button3:hover {
    background-color: white;
    color: #FF9900;
    border: 2px solid #60E612;
  }
  </style>
  <title>Basic Image Processing</title>
  </head>
  <body>
    <div id="sitebody">
    <div id="header">
    <h1><i class="fa fa-camera"></i> I*F--Image Processing & Filters APP</h1>
    <label>Upload Image File:</label><br/>
    <input class="button3" type="file" id="imageLoader" name="imageLoader"/>
    <button class="button" onclick="myFunction2()">Flip Upside-Down</button>
    <button class="button" onclick="myFunction3()">Flip Horizontal</button>
    <label>x scale: </label><input type="text" id="myText1" placeholder="x scale" value=1 style="width: 30px">
    <label>y scale: </label><input type="text" id="myText2" placeholder="y scale" value=1 style="width: 30px">
    <button class="button" onclick="myFunction5()">Scale</button>
    <button class="button" onclick="myFunction7()">Invert Color</button>
    <button class="button" onclick="myFunction8()">Grayscale</button>
    <button class="button" onclick="myFunction9()">Transparent</button>
    <button class="button" onclick="myFunction10()">Red</button>
    <button class="button" onclick="myFunction11()">Blue</button>
    <button class="button" onclick="myFunction12()">Green</button>
    <button class="button" onclick="myFunction14()">Brightness</button>
    <button class="button" onclick="myFunction20()">Darken</button>
    <button class="button" onclick="myFunction16()">Sharpen</button>
    <button class="button" onclick="myFunction17()">Blur</button>
    <button class="button" onclick="myFunction23()">Gaussian Blur</button>
    <button class="button" onclick="myFunction24()">Motion Blur</button>
    <button class="button" onclick="myFunction21()">Edge</button>
    <button class="button" onclick="myFunction25()">Edge2</button>
    <button class="button" onclick="myFunction26()">Contour</button>
    <button class="button" onclick="myFunction22()">Emboss</button>
    <button class="button" onclick="myFunction27()">Detail</button>
    <button class="button" onclick="myFunction28()">Smooth</button>
    <button class="button" onclick="myFunction29()">Sobel</button>
    <button class="button" onclick="myFunction18()">Carve</button>
    <button class="button" onclick="myFunction19()">Luminance</button>
    <button class="button" onclick="myFunction15()">Threshold</button>
    <button class="button" onclick="myFunction31()">Vintage</button>
    <button class="button" onclick="myFunction32()">Erosion</button>
    <button class="button" onclick="myFunction33()">Dilate</button>
    <button class="button" onclick="myFunction34()">Red<=>Green</button>
    <button class="button" onclick="myFunction35()">Red<=>Blue</button>
    <button class="button" onclick="myFunction36()">Green<=>Blue</button>
    <button class="button" onclick="myFunction37()">Diffusion</button>
    <button class="button" onclick="myFunction38()">Comic</button>
    <button class="button2" onclick="myFunction13()">Clear</button> 
   </div>
   <div id="sidebar_left">
    <div>
    <canvas id="zoom" width="200" height="200"></canvas><br>
    <label for="smoothbtn">
    <input type="checkbox" name="smoothbtn" checked="checked" id="smoothbtn">
    Enable Smoothing
    </label>
    </div>
    </div>
   <div id="sidebar_right"></div>
   <div id="content"><canvas width="1000px" height="1000px" id="canvas"></canvas></div>
   <div id="footer"></div>
    </div>
    <script>
    var imageLoader = document.getElementById('imageLoader');
    imageLoader.addEventListener('change', handleImage, false);
    var canvas=document.getElementById('canvas');
    var ctx=canvas.getContext('2d');
    var img;
    var ulx=0;
    var uly=0;
    function handleImage(e)
    {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ulx=0;
        uly=0;
        var reader = new FileReader();
        reader.onload = function(event)
        {
            img = new Image();
            img.onload = function()
            {    canvas.width=img.width*1000/img.width;
                 canvas.height=img.height*1000/img.width;                              
                 ctx.drawImage(img,0,0,img.width*1000/img.width,img.height*1000/img.width);
                 img.width=canvas.width;
                 img.height=canvas.height;
            }
            img.src = event.target.result;
        }
        reader.readAsDataURL(e.target.files[0]);     
    }
    function myFunction2()
    {
        ctx.translate(img.width, img.height);
        ctx.rotate(Math.PI);
        ctx.drawImage(img, ulx,uly, img.width, img.height);
    }
    function myFunction3()
    {
        ctx.translate(img.width, 0);
        ctx.scale(-1, 1);
        ctx.drawImage(img, ulx,uly, img.width, img.height);
    }
    function myFunction5()
    {
        var xs=document.getElementById("myText1").value;
        var ys=document.getElementById("myText2").value;
        ctx.clearRect(ulx, uly, canvas.width, canvas.height);
        ctx.scale(xs, ys);
        ctx.drawImage(img, ulx,uly, img.width, img.height);
    }
    myFunction6();
    function myFunction6()
    {
        var zoomctx = document.getElementById('zoom').getContext('2d'); 
        var smoothbtn = document.getElementById('smoothbtn');
        var toggleSmoothing = function(event)
        {
            zoomctx.imageSmoothingEnabled = this.checked;
            zoomctx.mozImageSmoothingEnabled = this.checked;
            zoomctx.webkitImageSmoothingEnabled = this.checked;
            zoomctx.msImageSmoothingEnabled = this.checked;
        };
        smoothbtn.addEventListener('change', toggleSmoothing);
        var zoom = function(event)
        {
            var x = event.layerX;
            var y = event.layerY;
            zoomctx.drawImage(canvas,
            Math.abs(x - 5),
            Math.abs(y - 5),
            10, 10,
            0, 0,
            200, 200);
        };
        canvas.addEventListener('mousemove', zoom);
    }
    function myFunction7()
    {
        var imageData=ctx.getImageData(0,0,img.width,img.height);
        var data=imageData.data;
        for(i=0;i<data.length;i+=4)
        {
          data[i]=255-data[i];
          data[i+1]=255-data[i+1];
          data[i+2]=255-data[i+2];
        }
        ctx.putImageData(imageData,0,0);
    }
    function myFunction8()
    {
        var imageData=ctx.getImageData(0,0,img.width,img.height);
        var data=imageData.data;
        for(i=0;i<data.length;i+=4)
        {
          gray=parseInt(0.299*data[i]+0.587*data[i+1]+0.714*data[i+2]);
          data[i]=gray;
          data[i+1]=gray;
          data[i+2]=gray;
        }
        ctx.putImageData(imageData,0,0);
    }
    function myFunction31()
    {
        var imageData=ctx.getImageData(0,0,img.width,img.height);
        var data=imageData.data;
        for(i=0;i<data.length;i+=4)
        {
          gray=parseInt(0.299*data[i]+0.587*data[i+1]+0.714*data[i+2]);
          data[i]=gray+65;
          data[i+1]=gray+30;
          data[i+2]=gray-25;
        }
        ctx.putImageData(imageData,0,0);
    }
    function myFunction9()
    {
        var imageData=ctx.getImageData(0,0,img.width,img.height);
        var data=imageData.data;
        for(i=0;i<data.length;i+=4)
          data[i + 3]=128;
        ctx.putImageData(imageData,0,0);
    }
    function myFunction10()
    {
        var imageData=ctx.getImageData(0,0,img.width,img.height);
        var data=imageData.data;
        for(i=0;i<data.length;i+=4)
        {
          data[i+1]=0;
          data[i+2]=0;
        }
        ctx.putImageData(imageData,0,0);
    }
    function myFunction11()
    {
        var imageData=ctx.getImageData(0,0,img.width,img.height);
        var data=imageData.data;
        for(i=0;i<data.length;i+=4)
        {
          data[i]=0;
          data[i+1]=0;
        }
        ctx.putImageData(imageData,0,0);
    }
    function myFunction12()
    {
        var imageData=ctx.getImageData(0,0,img.width,img.height);
        var data=imageData.data;
        for(i=0;i<data.length;i+=4)
        {
          data[i]=0;
          data[i+2]=0;
        }
        ctx.putImageData(imageData,0,0);
    }
    function myFunction13()
    {
        ctx.clearRect(0, 0, canvas.width, canvas.height);  
    }
    function myFunction14()
    {
        var imageData=ctx.getImageData(0,0,img.width,img.height);
        var data=imageData.data;
        var adjustment=20;
        for(i=0;i<data.length;i+=4)
        {
          data[i] += adjustment;
          data[i+1] += adjustment;
          data[i+2] += adjustment;
        }
        ctx.putImageData(imageData,0,0);
    }
    function myFunction15()
    {
        var imageData=ctx.getImageData(0,0,img.width,img.height);
        var data=imageData.data;
        var threshold=150;
        for(i=0;i<data.length;i+=4)
        {
          var r = data[i];
          var g = data[i+1];
          var b = data[i+2];
          var v = (0.2126*r + 0.7152*g + 0.0722*b >= threshold) ? 255 : 0;
    data[i] = data[i+1] = data[i+2] = v
        }
        ctx.putImageData(imageData,0,0);
    }
    function myFunction16()
    {
        var weights=[0, -1/3,  0, -1/3,  7/3, -1/3, 0, -1/3,  0];
        var op=0.5;
        var imageData=ctx.getImageData(0,0,img.width,img.height);
        var side=Math.round(Math.sqrt(weights.length));
        var halfSide=Math.floor(side/2);
        var src=imageData.data;
        var sw=img.width;
        var sh=img.height;
        var w=sw;
        var h=sh;
        var output=ctx.createImageData(w,h);
        var dst=output.data;
        var alphaFac=op?1:0;
        for(y=0;y<h;y++)
        {
            for(x=0;x<w;x++)
            {
                var sy=y;
                var sx=x;
                var dstOff=(y*w+x)*4;
                var r=0, g=0, b=0, a=0;
                for(cy=0;cy<side;cy++)
                {
                    for(cx=0;cx<side;cx++)
                    {
                        var scy=sy+cy-halfSide;
                        var scx=sx+cx-halfSide;
                        if(scy>=0 && scy<sh && scx>=0 && scx<sw)
                        {
                            var srcOff=(scy*sw+scx)*4;
                            var wt=weights[cy*side+cx];
                            r+=src[srcOff]*wt;
                            g+=src[srcOff+1]*wt;
                            b+=src[srcOff+2]*wt;
                            a+=src[srcOff+3]*wt;
                        }
                    }
                }
                dst[dstOff]=r;
                dst[dstOff+1]=g;
                dst[dstOff+2]=b;
                dst[dstOff+3]=a+alphaFac*(255-a);
            }
        }
        ctx.putImageData(output,0,0);
    }
    function myFunction17()
    {
        var weights=[1/9, 1/9, 1/9, 1/9, 1/9, 1/9, 1/9, 1/9, 1/9 ];
        var op=0.5;
        var imageData=ctx.getImageData(0,0,img.width,img.height);
        var side=Math.round(Math.sqrt(weights.length));
        var halfSide=Math.floor(side/2);
        var src=imageData.data;
        var sw=img.width;
        var sh=img.height;
        var w=sw;
        var h=sh;
        var output=ctx.createImageData(w,h);
        var dst=output.data;
        var alphaFac=op?1:0;
        for(y=0;y<h;y++)
        {
            for(x=0;x<w;x++)
            {
                var sy=y;
                var sx=x;
                var dstOff=(y*w+x)*4;
                var r=0, g=0, b=0, a=0;
                for(cy=0;cy<side;cy++)
                {
                    for(cx=0;cx<side;cx++)
                    {
                        var scy=sy+cy-halfSide;
                        var scx=sx+cx-halfSide;
                        if(scy>=0 && scy<sh && scx>=0 && scx<sw)
                        {
                            var srcOff=(scy*sw+scx)*4;
                            var wt=weights[cy*side+cx];
                            r+=src[srcOff]*wt;
                            g+=src[srcOff+1]*wt;
                            b+=src[srcOff+2]*wt;
                            a+=src[srcOff+3]*wt;
                        }
                    }
                }
                dst[dstOff]=r;
                dst[dstOff+1]=g;
                dst[dstOff+2]=b;
                dst[dstOff+3]=a+alphaFac*(255-a);
            }
        }
        ctx.putImageData(output,0,0);
    }
    function myFunction18()
    {
        var weights=[1, 1, 1, 1, 0.7, -1, -1, -1, -1];
        var op=0.5;
        var imageData=ctx.getImageData(0,0,img.width,img.height);
        var side=Math.round(Math.sqrt(weights.length));
        var halfSide=Math.floor(side/2);
        var src=imageData.data;
        var sw=img.width;
        var sh=img.height;
        var w=sw;
        var h=sh;
        var output=ctx.createImageData(w,h);
        var dst=output.data;
        var alphaFac=op?1:0;
        for(y=0;y<h;y++)
        {
            for(x=0;x<w;x++)
            {
                var sy=y;
                var sx=x;
                var dstOff=(y*w+x)*4;
                var r=0, g=0, b=0, a=0;
                for(cy=0;cy<side;cy++)
                {
                    for(cx=0;cx<side;cx++)
                    {
                        var scy=sy+cy-halfSide;
                        var scx=sx+cx-halfSide;
                        if(scy>=0 && scy<sh && scx>=0 && scx<sw)
                        {
                            var srcOff=(scy*sw+scx)*4;
                            var wt=weights[cy*side+cx];
                            r+=src[srcOff]*wt;
                            g+=src[srcOff+1]*wt;
                            b+=src[srcOff+2]*wt;
                            a+=src[srcOff+3]*wt;
                        }
                    }
                }
                dst[dstOff]=r;
                dst[dstOff+1]=g;
                dst[dstOff+2]=b;
                dst[dstOff+3]=a+alphaFac*(255-a);
            }
        }
        ctx.putImageData(output,0,0);
    }
    function myFunction19()
    {
        var rwgt=0.3086, gwgt=0.6094, bwgt=0.0820;
        var weights=[rwgt,rwgt,rwgt,0,gwgt,gwgt,gwgt,0,bwgt,bwgt,bwgt,0,0,0,0,1];
        var op=0.5;
        var imageData=ctx.getImageData(0,0,img.width,img.height);
        var side=Math.round(Math.sqrt(weights.length));
        var halfSide=Math.floor(side/2);
        var src=imageData.data;
        var sw=img.width;
        var sh=img.height;
        var w=sw;
        var h=sh;
        var output=ctx.createImageData(w,h);
        var dst=output.data;
        var alphaFac=op?1:0;
        for(y=0;y<h;y++)
        {
            for(x=0;x<w;x++)
            {
                var sy=y;
                var sx=x;
                var dstOff=(y*w+x)*4;
                var r=0, g=0, b=0, a=0;
                for(cy=0;cy<side;cy++)
                {
                    for(cx=0;cx<side;cx++)
                    {
                        var scy=sy+cy-halfSide;
                        var scx=sx+cx-halfSide;
                        if(scy>=0 && scy<sh && scx>=0 && scx<sw)
                        {
                            var srcOff=(scy*sw+scx)*4;
                            var wt=weights[cy*side+cx];
                            r+=src[srcOff]*wt;
                            g+=src[srcOff+1]*wt;
                            b+=src[srcOff+2]*wt;
                            a+=src[srcOff+3]*wt;
                        }
                    }
                }
                dst[dstOff]=r;
                dst[dstOff+1]=g;
                dst[dstOff+2]=b;
                dst[dstOff+3]=a+alphaFac*(255-a);
            }
        }
        ctx.putImageData(output,0,0);
    }
    function myFunction20()
    {
        var weights=[0, 0, 0, 0, 6/9, 0, 0, 0, 0];
        var op=0.5;
        var imageData=ctx.getImageData(0,0,img.width,img.height);
        var side=Math.round(Math.sqrt(weights.length));
        var halfSide=Math.floor(side/2);
        var src=imageData.data;
        var sw=img.width;
        var sh=img.height;
        var w=sw;
        var h=sh;
        var output=ctx.createImageData(w,h);
        var dst=output.data;
        var alphaFac=op?1:0;
        for(y=0;y<h;y++)
        {
            for(x=0;x<w;x++)
            {
                var sy=y;
                var sx=x;
                var dstOff=(y*w+x)*4;
                var r=0, g=0, b=0, a=0;
                for(cy=0;cy<side;cy++)
                {
                    for(cx=0;cx<side;cx++)
                    {
                        var scy=sy+cy-halfSide;
                        var scx=sx+cx-halfSide;
                        if(scy>=0 && scy<sh && scx>=0 && scx<sw)
                        {
                            var srcOff=(scy*sw+scx)*4;
                            var wt=weights[cy*side+cx];
                            r+=src[srcOff]*wt;
                            g+=src[srcOff+1]*wt;
                            b+=src[srcOff+2]*wt;
                            a+=src[srcOff+3]*wt;
                        }
                    }
                }
                dst[dstOff]=r;
                dst[dstOff+1]=g;
                dst[dstOff+2]=b;
                dst[dstOff+3]=a+alphaFac*(255-a);
            }
        }
        ctx.putImageData(output,0,0);
    }
    function myFunction21()
    {
        var weights=[0, 1, 0, 1, -4, 1, 0, 1, 0];
        var op=1;
        var imageData=ctx.getImageData(0,0,img.width,img.height);
        var side=Math.round(Math.sqrt(weights.length));
        var halfSide=Math.floor(side/2);
        var src=imageData.data;
        var sw=img.width;
        var sh=img.height;
        var w=sw;
        var h=sh;
        var output=ctx.createImageData(w,h);
        var dst=output.data;
        var alphaFac=op?1:0;
        for(y=0;y<h;y++)
        {
            for(x=0;x<w;x++)
            {
                var sy=y;
                var sx=x;
                var dstOff=(y*w+x)*4;
                var r=0, g=0, b=0, a=0;
                for(cy=0;cy<side;cy++)
                {
                    for(cx=0;cx<side;cx++)
                    {
                        var scy=sy+cy-halfSide;
                        var scx=sx+cx-halfSide;
                        if(scy>=0 && scy<sh && scx>=0 && scx<sw)
                        {
                            var srcOff=(scy*sw+scx)*4;
                            var wt=weights[cy*side+cx];
                            r+=src[srcOff]*wt;
                            g+=src[srcOff+1]*wt;
                            b+=src[srcOff+2]*wt;
                            a+=src[srcOff+3]*wt;
                        }
                    }
                }
                dst[dstOff]=r;
                dst[dstOff+1]=g;
                dst[dstOff+2]=b;
                dst[dstOff+3]=a+alphaFac*(255-a);
            }
        }
        ctx.putImageData(output,0,0);
    }
    function myFunction22()
    {
        var weights=[-2, -1, 0, -1, 1, 1, 0, 1, 2];
        var op=1;
        var imageData=ctx.getImageData(0,0,img.width,img.height);
        var side=Math.round(Math.sqrt(weights.length));
        var halfSide=Math.floor(side/2);
        var src=imageData.data;
        var sw=img.width;
        var sh=img.height;
        var w=sw;
        var h=sh;
        var output=ctx.createImageData(w,h);
        var dst=output.data;
        var alphaFac=op?1:0;
        for(y=0;y<h;y++)
        {
            for(x=0;x<w;x++)
            {
                var sy=y;
                var sx=x;
                var dstOff=(y*w+x)*4;
                var r=0, g=0, b=0, a=0;
                for(cy=0;cy<side;cy++)
                {
                    for(cx=0;cx<side;cx++)
                    {
                        var scy=sy+cy-halfSide;
                        var scx=sx+cx-halfSide;
                        if(scy>=0 && scy<sh && scx>=0 && scx<sw)
                        {
                            var srcOff=(scy*sw+scx)*4;
                            var wt=weights[cy*side+cx];
                            r+=src[srcOff]*wt;
                            g+=src[srcOff+1]*wt;
                            b+=src[srcOff+2]*wt;
                            a+=src[srcOff+3]*wt;
                        }
                    }
                }
                dst[dstOff]=r;
                dst[dstOff+1]=g;
                dst[dstOff+2]=b;
                dst[dstOff+3]=a+alphaFac*(255-a);
            }
        }
        ctx.putImageData(output,0,0);
    }
    function myFunction23()
    {
        var weights=[1/16, 2/16, 1/16, 2/16, 4/16, 2/16, 1/16, 2/16, 1/16];
        var op=1;
        var imageData=ctx.getImageData(0,0,img.width,img.height);
        var side=Math.round(Math.sqrt(weights.length));
        var halfSide=Math.floor(side/2);
        var src=imageData.data;
        var sw=img.width;
        var sh=img.height;
        var w=sw;
        var h=sh;
        var output=ctx.createImageData(w,h);
        var dst=output.data;
        var alphaFac=op?1:0;
        for(y=0;y<h;y++)
        {
            for(x=0;x<w;x++)
            {
                var sy=y;
                var sx=x;
                var dstOff=(y*w+x)*4;
                var r=0, g=0, b=0, a=0;
                for(cy=0;cy<side;cy++)
                {
                    for(cx=0;cx<side;cx++)
                    {
                        var scy=sy+cy-halfSide;
                        var scx=sx+cx-halfSide;
                        if(scy>=0 && scy<sh && scx>=0 && scx<sw)
                        {
                            var srcOff=(scy*sw+scx)*4;
                            var wt=weights[cy*side+cx];
                            r+=src[srcOff]*wt;
                            g+=src[srcOff+1]*wt;
                            b+=src[srcOff+2]*wt;
                            a+=src[srcOff+3]*wt;
                        }
                    }
                }
                dst[dstOff]=r;
                dst[dstOff+1]=g;
                dst[dstOff+2]=b;
                dst[dstOff+3]=a+alphaFac*(255-a);
            }
        }
        ctx.putImageData(output,0,0);
    }
    function myFunction24()
    {
        var weights=[1/9, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 1/9, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 1/9, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 1/9, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 1/9, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 1/9, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 1/9, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 1/9, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 1/9];
        var op=1;
        var imageData=ctx.getImageData(0,0,img.width,img.height);
        var side=Math.round(Math.sqrt(weights.length));
        var halfSide=Math.floor(side/2);
        var src=imageData.data;
        var sw=img.width;
        var sh=img.height;
        var w=sw;
        var h=sh;
        var output=ctx.createImageData(w,h);
        var dst=output.data;
        var alphaFac=op?1:0;
        for(y=0;y<h;y++)
        {
            for(x=0;x<w;x++)
            {
                var sy=y;
                var sx=x;
                var dstOff=(y*w+x)*4;
                var r=0, g=0, b=0, a=0;
                for(cy=0;cy<side;cy++)
                {
                    for(cx=0;cx<side;cx++)
                    {
                        var scy=sy+cy-halfSide;
                        var scx=sx+cx-halfSide;
                        if(scy>=0 && scy<sh && scx>=0 && scx<sw)
                        {
                            var srcOff=(scy*sw+scx)*4;
                            var wt=weights[cy*side+cx];
                            r+=src[srcOff]*wt;
                            g+=src[srcOff+1]*wt;
                            b+=src[srcOff+2]*wt;
                            a+=src[srcOff+3]*wt;
                        }
                    }
                }
                dst[dstOff]=r;
                dst[dstOff+1]=g;
                dst[dstOff+2]=b;
                dst[dstOff+3]=a+alphaFac*(255-a);
            }
        }
        ctx.putImageData(output,0,0);
    }
    function myFunction25()
    {
        var weights=[1, 1, 1,1, -7, 1,1,  1,  1];
        var op=1;
        var imageData=ctx.getImageData(0,0,img.width,img.height);
        var side=Math.round(Math.sqrt(weights.length));
        var halfSide=Math.floor(side/2);
        var src=imageData.data;
        var sw=img.width;
        var sh=img.height;
        var w=sw;
        var h=sh;
        var output=ctx.createImageData(w,h);
        var dst=output.data;
        var alphaFac=op?1:0;
        for(y=0;y<h;y++)
        {
            for(x=0;x<w;x++)
            {
                var sy=y;
                var sx=x;
                var dstOff=(y*w+x)*4;
                var r=0, g=0, b=0, a=0;
                for(cy=0;cy<side;cy++)
                {
                    for(cx=0;cx<side;cx++)
                    {
                        var scy=sy+cy-halfSide;
                        var scx=sx+cx-halfSide;
                        if(scy>=0 && scy<sh && scx>=0 && scx<sw)
                        {
                            var srcOff=(scy*sw+scx)*4;
                            var wt=weights[cy*side+cx];
                            r+=src[srcOff]*wt;
                            g+=src[srcOff+1]*wt;
                            b+=src[srcOff+2]*wt;
                            a+=src[srcOff+3]*wt;
                        }
                    }
                }
                dst[dstOff]=r;
                dst[dstOff+1]=g;
                dst[dstOff+2]=b;
                dst[dstOff+3]=a+alphaFac*(255-a);
            }
        }
        ctx.putImageData(output,0,0);
    }
    function myFunction26()
    {
        var weights=[-1, -1, -1, -1,  8, -1,-1, -1, -1];
        var op=1;
        var imageData=ctx.getImageData(0,0,img.width,img.height);
        var side=Math.round(Math.sqrt(weights.length));
        var halfSide=Math.floor(side/2);
        var src=imageData.data;
        var sw=img.width;
        var sh=img.height;
        var w=sw;
        var h=sh;
        var output=ctx.createImageData(w,h);
        var dst=output.data;
        var alphaFac=op?1:0;
        for(y=0;y<h;y++)
        {
            for(x=0;x<w;x++)
            {
                var sy=y;
                var sx=x;
                var dstOff=(y*w+x)*4;
                var r=0, g=0, b=0, a=0;
                for(cy=0;cy<side;cy++)
                {
                    for(cx=0;cx<side;cx++)
                    {
                        var scy=sy+cy-halfSide;
                        var scx=sx+cx-halfSide;
                        if(scy>=0 && scy<sh && scx>=0 && scx<sw)
                        {
                            var srcOff=(scy*sw+scx)*4;
                            var wt=weights[cy*side+cx];
                            r+=src[srcOff]*wt;
                            g+=src[srcOff+1]*wt;
                            b+=src[srcOff+2]*wt;
                            a+=src[srcOff+3]*wt;
                        }
                    }
                }
                dst[dstOff]=255-r;
                dst[dstOff+1]=255-g;
                dst[dstOff+2]=255-b;
                dst[dstOff+3]=a+alphaFac*(255-a);
            }
        }
        ctx.putImageData(output,0,0);
    }
    function myFunction27()
    {
        var weights=[0, -1/6,  0, -1/6, 10/6, -1/6, 0, -1/6,  0];
        var op=1;
        var imageData=ctx.getImageData(0,0,img.width,img.height);
        var side=Math.round(Math.sqrt(weights.length));
        var halfSide=Math.floor(side/2);
        var src=imageData.data;
        var sw=img.width;
        var sh=img.height;
        var w=sw;
        var h=sh;
        var output=ctx.createImageData(w,h);
        var dst=output.data;
        var alphaFac=op?1:0;
        for(y=0;y<h;y++)
        {
            for(x=0;x<w;x++)
            {
                var sy=y;
                var sx=x;
                var dstOff=(y*w+x)*4;
                var r=0, g=0, b=0, a=0;
                for(cy=0;cy<side;cy++)
                {
                    for(cx=0;cx<side;cx++)
                    {
                        var scy=sy+cy-halfSide;
                        var scx=sx+cx-halfSide;
                        if(scy>=0 && scy<sh && scx>=0 && scx<sw)
                        {
                            var srcOff=(scy*sw+scx)*4;
                            var wt=weights[cy*side+cx];
                            r+=src[srcOff]*wt;
                            g+=src[srcOff+1]*wt;
                            b+=src[srcOff+2]*wt;
                            a+=src[srcOff+3]*wt;
                        }
                    }
                }
                dst[dstOff]=r;
                dst[dstOff+1]=g;
                dst[dstOff+2]=b;
                dst[dstOff+3]=a+alphaFac*(255-a);
            }
        }
        ctx.putImageData(output,0,0);
    }
    function myFunction28()
    {
        var weights=[1/13, 1/13, 1/13, 1/13, 5/13, 1/13, 1/13,  1/13, 1/13];
        var op=1;
        var imageData=ctx.getImageData(0,0,img.width,img.height);
        var side=Math.round(Math.sqrt(weights.length));
        var halfSide=Math.floor(side/2);
        var src=imageData.data;
        var sw=img.width;
        var sh=img.height;
        var w=sw;
        var h=sh;
        var output=ctx.createImageData(w,h);
        var dst=output.data;
        var alphaFac=op?1:0;
        for(y=0;y<h;y++)
        {
            for(x=0;x<w;x++)
            {
                var sy=y;
                var sx=x;
                var dstOff=(y*w+x)*4;
                var r=0, g=0, b=0, a=0;
                for(cy=0;cy<side;cy++)
                {
                    for(cx=0;cx<side;cx++)
                    {
                        var scy=sy+cy-halfSide;
                        var scx=sx+cx-halfSide;
                        if(scy>=0 && scy<sh && scx>=0 && scx<sw)
                        {
                            var srcOff=(scy*sw+scx)*4;
                            var wt=weights[cy*side+cx];
                            r+=src[srcOff]*wt;
                            g+=src[srcOff+1]*wt;
                            b+=src[srcOff+2]*wt;
                            a+=src[srcOff+3]*wt;
                        }
                    }
                }
                dst[dstOff]=r;
                dst[dstOff+1]=g;
                dst[dstOff+2]=b;
                dst[dstOff+3]=a+alphaFac*(255-a);
            }
        }
        ctx.putImageData(output,0,0);
    }
    function myFunction29()
    {
        var weights=[-1, 0, 1, -2, 0, 2, -1, 0 ,1];
        var weights1=[-1, -2, -1, 0, 0, 0, 1, 2, 1];
        var op=1;
        var imageData=ctx.getImageData(0,0,img.width,img.height);
        var side=Math.round(Math.sqrt(weights.length));
        var halfSide=Math.floor(side/2);
        var src=imageData.data;
        var sw=img.width;
        var sh=img.height;
        var w=sw;
        var h=sh;
        var output=ctx.createImageData(w,h);
        var dst=output.data;
        var alphaFac=op?1:0;
        for(y=0;y<h;y++)
        {
            for(x=0;x<w;x++)
            {
                var sy=y;
                var sx=x;
                var dstOff=(y*w+x)*4;
                var r=0, g=0, b=0, a=0;
                var r1=0, g1=0, b1=0, a1=0;
                for(cy=0;cy<side;cy++)
                {
                    for(cx=0;cx<side;cx++)
                    {
                        var scy=sy+cy-halfSide;
                        var scx=sx+cx-halfSide;
                        if(scy>=0 && scy<sh && scx>=0 && scx<sw)
                        {
                            var srcOff=(scy*sw+scx)*4;
                            var wt=weights[cy*side+cx];
                            var wt1=weights1[cy*side+cx];
                            r+=src[srcOff]*wt;
                            g+=src[srcOff+1]*wt;
                            b+=src[srcOff+2]*wt;
                            a+=src[srcOff+3]*wt; 
                            r1+=src[srcOff]*wt1;
                            g1+=src[srcOff+1]*wt1;
                            b1+=src[srcOff+3]*wt1;
                            a1+=src[srcOff+3]*wt1;
                        }
                    }
                }
                dst[dstOff]=Math.sqrt(r*r+r1*r1);
                dst[dstOff+1]=Math.sqrt(g*g+g1*g1);
                dst[dstOff+2]=Math.sqrt(b*b+b1*b1);
                dst[dstOff+3]=a+alphaFac*(255-a);
            }
        }
        ctx.putImageData(output,0,0);
    }
    function myFunction30()
    {
        var weights=[1, 1, 1, 1,1, 1, 1,  1, 1];
        var op=1;
        var imageData=ctx.getImageData(0,0,img.width,img.height);
        var side=Math.round(Math.sqrt(weights.length));
        var halfSide=Math.floor(side/2);
        var src=imageData.data;
        var sw=img.width;
        var sh=img.height;
        var w=sw;
        var h=sh;
        var output=ctx.createImageData(w,h);
        var dst=output.data;
        var alphaFac=op?1:0;
        for(y=0;y<h;y++)
        {
            for(x=0;x<w;x++)
            {
                var sy=y;
                var sx=x;
                var dstOff=(y*w+x)*4;
                var r=0, g=0, b=0, a=0;
                for(cy=0;cy<side;cy++)
                {
                    for(cx=0;cx<side;cx++)
                    {
                        var scy=sy+cy-halfSide;
                        var scx=sx+cx-halfSide;
                        if(scy>=0 && scy<sh && scx>=0 && scx<sw)
                        {
                            var srcOff=(scy*sw+scx)*4;
                            var wt=weights[cy*side+cx];
                            r+=src[srcOff]*wt;
                            g+=src[srcOff+1]*wt;
                            b+=src[srcOff+2]*wt;
                            a+=src[srcOff+3]*wt;
                        }
                    }
                }
                dst[dstOff]=r;
                dst[dstOff+1]=g;
                dst[dstOff+2]=b;
                dst[dstOff+3]=a+alphaFac*(255-a);
            }
        }
        ctx.putImageData(output,0,0);
    }
    function myFunction32()
    {
        var weights=[1, 1, 1, 1,1, 1, 1,  1, 1];
        var op=1;
        var imageData=ctx.getImageData(0,0,img.width,img.height);
        var side=Math.round(Math.sqrt(weights.length));
        var halfSide=Math.floor(side/2);
        var src=imageData.data;
        var sw=img.width;
        var sh=img.height;
        var w=sw;
        var h=sh;
        var output=ctx.createImageData(w,h);
        var dst=output.data;
        var alphaFac=op?1:0;
        for(y=0;y<h;y++)
        {
            for(x=0;x<w;x++)
            {
                var sy=y;
                var sx=x;
                var dstOff=(y*w+x)*4;
                var r=0, g=0, b=0, a=0;
                var rmin=999, gmin=999, bmin=999;
                for(cy=0;cy<side;cy++)
                {
                    rmin=999, gmin=999, bmin=999;
                    for(cx=0;cx<side;cx++)
                    {
                        var scy=sy+cy-halfSide;
                        var scx=sx+cx-halfSide;
                        if(scy>=0 && scy<sh && scx>=0 && scx<sw)
                        {
                            var srcOff=(scy*sw+scx)*4;
                            if(src[srcOff]<rmin)
                                rmin=src[srcOff];
                            if(src[srcOff+1]<gmin)
                                gmin=src[srcOff+1];
                            if(src[srcOff+2]<bmin)
                                bmin=src[srcOff+1];
                        }
                    }
                }
                dst[dstOff]=rmin;
                dst[dstOff+1]=gmin;
                dst[dstOff+2]=bmin;
                dst[dstOff+3]=a+alphaFac*(255-a);
            }
        }
        ctx.putImageData(output,0,0);
    }
    function myFunction33()
    {
        var weights=[1, 1, 1, 1,1, 1, 1,  1, 1];
        var op=1;
        var imageData=ctx.getImageData(0,0,img.width,img.height);
        var side=Math.round(Math.sqrt(weights.length));
        var halfSide=Math.floor(side/2);
        var src=imageData.data;
        var sw=img.width;
        var sh=img.height;
        var w=sw;
        var h=sh;
        var output=ctx.createImageData(w,h);
        var dst=output.data;
        var alphaFac=op?1:0;
        for(y=0;y<h;y++)
        {
            for(x=0;x<w;x++)
            {
                var sy=y;
                var sx=x;
                var dstOff=(y*w+x)*4;
                var r=0, g=0, b=0, a=0;
                var rmax=-999, gmax=-999, bmax=-999;
                for(cy=0;cy<side;cy++)
                {
                    rmax=-999, gmax=-999, bmax=-999;
                    for(cx=0;cx<side;cx++)
                    {
                        var scy=sy+cy-halfSide;
                        var scx=sx+cx-halfSide;
                        if(scy>=0 && scy<sh && scx>=0 && scx<sw)
                        {
                            var srcOff=(scy*sw+scx)*4;
                            if(src[srcOff]>rmax)
                                rmax=src[srcOff];
                            if(src[srcOff+1]>gmax)
                                gmax=src[srcOff+1];
                            if(src[srcOff+2]>bmax)
                                bmax=src[srcOff+1];
                        }
                    }
                }
                dst[dstOff]=rmax;
                dst[dstOff+1]=gmax;
                dst[dstOff+2]=bmax;
                dst[dstOff+3]=a+alphaFac*(255-a);
            }
        }
        ctx.putImageData(output,0,0);
    }
    function myFunction34()
    {
        var weights=[1/9, 1/9, 1/9, 1/9,1/9, 1/9, 1/9,  1/9, 1/9];
        var op=1;
        var imageData=ctx.getImageData(0,0,img.width,img.height);
        var side=Math.round(Math.sqrt(weights.length));
        var halfSide=Math.floor(side/2);
        var src=imageData.data;
        var sw=img.width;
        var sh=img.height;
        var w=sw;
        var h=sh;
        var output=ctx.createImageData(w,h);
        var dst=output.data;
        var alphaFac=op?1:0;
        for(y=0;y<h;y++)
        {
            for(x=0;x<w;x++)
            {
                var sy=y;
                var sx=x;
                var dstOff=(y*w+x)*4;
                var r=0, g=0, b=0, a=0;
                for(cy=0;cy<side;cy++)
                {
                    for(cx=0;cx<side;cx++)
                    {
                        var scy=sy+cy-halfSide;
                        var scx=sx+cx-halfSide;
                        if(scy>=0 && scy<sh && scx>=0 && scx<sw)
                        {
                            var srcOff=(scy*sw+scx)*4;
                            var wt=weights[cy*side+cx];
                            r+=src[srcOff+1]*wt;
                            g+=src[srcOff]*wt;
                            b+=src[srcOff+2]*wt;
                            a+=src[srcOff+3]*wt;
                        }
                    }
                }
                dst[dstOff]=r;
                dst[dstOff+1]=g;
                dst[dstOff+2]=b;
                dst[dstOff+3]=a+alphaFac*(255-a);
            }
        }
        ctx.putImageData(output,0,0);
    }
    function myFunction35()
    {
        var weights=[1/9, 1/9, 1/9, 1/9,1/9, 1/9, 1/9,  1/9, 1/9];
        var op=1;
        var imageData=ctx.getImageData(0,0,img.width,img.height);
        var side=Math.round(Math.sqrt(weights.length));
        var halfSide=Math.floor(side/2);
        var src=imageData.data;
        var sw=img.width;
        var sh=img.height;
        var w=sw;
        var h=sh;
        var output=ctx.createImageData(w,h);
        var dst=output.data;
        var alphaFac=op?1:0;
        for(y=0;y<h;y++)
        {
            for(x=0;x<w;x++)
            {
                var sy=y;
                var sx=x;
                var dstOff=(y*w+x)*4;
                var r=0, g=0, b=0, a=0;
                for(cy=0;cy<side;cy++)
                {
                    for(cx=0;cx<side;cx++)
                    {
                        var scy=sy+cy-halfSide;
                        var scx=sx+cx-halfSide;
                        if(scy>=0 && scy<sh && scx>=0 && scx<sw)
                        {
                            var srcOff=(scy*sw+scx)*4;
                            var wt=weights[cy*side+cx];
                            r+=src[srcOff+2]*wt;
                            g+=src[srcOff+1]*wt;
                            b+=src[srcOff]*wt;
                            a+=src[srcOff+3]*wt;
                        }
                    }
                }
                dst[dstOff]=r;
                dst[dstOff+1]=g;
                dst[dstOff+2]=b;
                dst[dstOff+3]=a+alphaFac*(255-a);
            }
        }
        ctx.putImageData(output,0,0);
    }
    function myFunction36()
    {
        var weights=[1/9, 1/9, 1/9, 1/9,1/9, 1/9, 1/9,  1/9, 1/9];
        var op=1;
        var imageData=ctx.getImageData(0,0,img.width,img.height);
        var side=Math.round(Math.sqrt(weights.length));
        var halfSide=Math.floor(side/2);
        var src=imageData.data;
        var sw=img.width;
        var sh=img.height;
        var w=sw;
        var h=sh;
        var output=ctx.createImageData(w,h);
        var dst=output.data;
        var alphaFac=op?1:0;
        for(y=0;y<h;y++)
        {
            for(x=0;x<w;x++)
            {
                var sy=y;
                var sx=x;
                var dstOff=(y*w+x)*4;
                var r=0, g=0, b=0, a=0;
                for(cy=0;cy<side;cy++)
                {
                    for(cx=0;cx<side;cx++)
                    {
                        var scy=sy+cy-halfSide;
                        var scx=sx+cx-halfSide;
                        if(scy>=0 && scy<sh && scx>=0 && scx<sw)
                        {
                            var srcOff=(scy*sw+scx)*4;
                            var wt=weights[cy*side+cx];
                            r+=src[srcOff]*wt;
                            g+=src[srcOff+2]*wt;
                            b+=src[srcOff+1]*wt;
                            a+=src[srcOff+3]*wt;
                        }
                    }
                }
                dst[dstOff]=r;
                dst[dstOff+1]=g;
                dst[dstOff+2]=b;
                dst[dstOff+3]=a+alphaFac*(255-a);
            }
        }
        ctx.putImageData(output,0,0);
    }
    function myFunction37()
    {
        var weights=[1/9, 1/9, 1/9, 1/9,1/9, 1/9, 1/9,  1/9, 1/9];
        var op=1;
        var imageData=ctx.getImageData(0,0,img.width,img.height);
        var side=Math.round(Math.sqrt(weights.length));
        var halfSide=Math.floor(side/2);
        var src=imageData.data;
        var sw=img.width;
        var sh=img.height;
        var w=sw;
        var h=sh;
        var R=5;
        var output=ctx.createImageData(w,h);
        var dst=output.data;
        var alphaFac=op?1:0;
        for(y=0;y<h;y++)
        {
            for(x=0;x<w;x++)
            {
                var sy=y;
                var sx=x;
                var dstOff=(y*w+x)*4;
                var r=0, g=0, b=0, a=0;
                for(cy=0;cy<side;cy++)
                {
                    for(cx=0;cx<side;cx++)
                    {
                        var x0=Math.random()*(2*R)-R;
                        var scy=sy+cy-halfSide;
                        var scx=sx+cx-halfSide;
                        if(scy>=0 && scy<sh && scx>=0 && scx<sw)
                        {
                            var srcOff=parseInt((scy*sw+scx+x0)*4);
                            var wt=weights[cy*side+cx];
                            r+=src[srcOff+0]*wt;
                            g+=src[srcOff+1]*wt;
                            b+=src[srcOff+2]*wt;
                            a+=src[srcOff+3]*wt;
                        }
                    }
                }
                dst[dstOff]=r;
                dst[dstOff+1]=g;
                dst[dstOff+2]=b;
                dst[dstOff+3]=a+alphaFac*(255-a);
            }
        }
        ctx.putImageData(output,0,0);
    }
    function myFunction38()
    {
        var weights=[1/9, 1/9, 1/9, 1/9,1/9, 1/9, 1/9,  1/9, 1/9];
        var op=1;
        var imageData=ctx.getImageData(0,0,img.width,img.height);
        var side=Math.round(Math.sqrt(weights.length));
        var halfSide=Math.floor(side/2);
        var src=imageData.data;
        var sw=img.width;
        var sh=img.height;
        var w=sw;
        var h=sh;
        var R=5;
        var output=ctx.createImageData(w,h);
        var dst=output.data;
        var alphaFac=op?1:0;
        for(y=0;y<h;y++)
        {
            for(x=0;x<w;x++)
            {
                var sy=y;
                var sx=x;
                var dstOff=(y*w+x)*4;
                var r=0, g=0, b=0, a=0;
                for(cy=0;cy<side;cy++)
                {
                    for(cx=0;cx<side;cx++)
                    {
                        var scy=sy+cy-halfSide;
                        var scx=sx+cx-halfSide;
                        if(scy>=0 && scy<sh && scx>=0 && scx<sw)
                        {
                            var srcOff=(scy*sw+scx)*4;
                            var wt=weights[cy*side+cx];
                            r+=src[srcOff+0]*wt;
                            g+=src[srcOff+1]*wt;
                            b+=src[srcOff+2]*wt;
                            a+=src[srcOff+3]*wt;
                        }
                    }
                }
                var mr=(Math.abs(g-b+g+r)*r)>>8; 
                var mg=(Math.abs(b-g+b+r)*r)>>8; 
                var mb=(Math.abs(b-g+b+r)*g)>>8;
                if(mr>255) r=255;
                else r=mr;
                if(mg>255) g=255;
                else g=mg;
                if(mb>255) b=255;
                else b=mb;
                dst[dstOff]=r;
                dst[dstOff+1]=g;
                dst[dstOff+2]=b;
                dst[dstOff+3]=a+alphaFac*(255-a);
            }
        }
        ctx.putImageData(output,0,0);
    }
    </script>
  </body>
</html> 
